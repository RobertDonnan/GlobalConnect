<!DOCTYPE html>
<!--
Click nbfs://nbhost/SystemFileSystem/Templates/Licenses/license-default.txt to change this license
Click nbfs://nbhost/SystemFileSystem/Templates/ClientSide/html.html to edit this template
-->
<html>
    <head>
        <title>View Passports</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
                <!-- Our stylesheet -->
        <link rel="stylesheet" type="text/css" href="main.css">
    </head>
    <body>
        <div class = "container mt-3">
         <div class="navbar">
  <div class="dropdown">
    <button class="dropbtn">Menu
      <i class="fa fa-caret-down"></i>
    </button>
    <div class="dropdown-content">
   <a href="home.html"><img src="icons/home.svg" width="20" height= "20"  alt="">Home</a>
      <a href="addPassport.html"> <img src="icons/passport.svg" width="20" height= "20"  alt="">Add a passport</a>
      <a href="addVisa.html"><img src="icons/identification.svg" width="20" height= "20"  alt="">Add a visa</a>
      <a href="help.html"><img src="icons/question-circle.svg" width="20" height= "20"  alt=""> Help</a>
      <a href="index.html"><img src="icons/gui-sign-out.svg" width="20" height= "20"  alt="">Sign Out</a>
    </div>
  </div>
        <table class ="table table-dark">
            <thead>
            <th contenteditable="true">Country</th>
            <th contenteditable="true">Issue Date</th>
            <th contenteditable="true">Expiry Date</th>
            <th contenteditable="true">Passport Type</th>
            </thead>
            <tbody id="tbody"></tbody>
   </table>
            </div>
          <style>
    body {
        background-image: url('images/appbgr.jpg');
    }
</style>
        <script type="module">
    
   var tbody = document.getElementById("tbody");
            
            function AddRecordsToTable(country, issue, expiry, type, userId){
                let trow = document.createElement("tr");
                let tdCountry = document.createElement("td");
                let tdIssue = document.createElement("td");
                let tdExpiry = document.createElement("td");
                let tdType = document.createElement("td");
           
              
              tdCountry.innerHTML=country;
               tdIssue.innerHTML=issue;
               tdExpiry.innerHTML=expiry;
               tdType.innerHTML=type;
  
               trow.appendChild(tdCountry);
               trow.appendChild(tdIssue);
               trow.appendChild(tdExpiry);
               trow.appendChild(tdType);

                  tbody.appendChild(trow);
            };
            
            function AddAllRecordsToTable(passport) {
                tbody.innerHTML="";
                passport.forEach(element => {
                    AddRecordsToTable(element.country, element.issue, element.expiry, element.type, element.userId);
                });
            };
            
            import { initializeApp } from "https://www.gstatic.com/firebasejs/10.11.1/firebase-app.js";
            // Your web app's Firebase configuration
// For Firebase JS SDK v7.20.0 and later, measurementId is optional
 const firebaseConfig = {
  apiKey: "AIzaSyCPe0_5pK-Ccv9pYfEzhhmlV6d2_dbHM2k",
  authDomain: "globalconnectweb-32060.firebaseapp.com",
  databaseURL: "https://globalconnectweb-32060-default-rtdb.europe-west1.firebasedatabase.app",
  projectId: "globalconnectweb-32060",
  storageBucket: "globalconnectweb-32060.appspot.com",
  messagingSenderId: "849990619987",
  appId: "1:849990619987:web:ec2a9ce08d625a5f1307a6",
  measurementId: "G-876NXSQ3LJ"
};
// Initialize Firebase
const app = initializeApp(firebaseConfig);




import {getDatabase, ref, child, onValue, get}
from "https://www.gstatic.com/firebasejs/10.11.1/firebase-database.js";



// Initialize variables
const db = getDatabase();

            
            function GetAllData(){
                const dbRef = ref(db);
                
                get(child(dbRef, "passport"))
                        .then((snapshot)=>{
                            var passports = [];
                    snapshot.forEach(childSnapshot => {
                        passports.push(childSnapshot.val());
                    });
                    
                    AddAllRecordsToTable(passports);
                   
                });
                    
            }
            
            window.onload = GetAllData;
            
           

            </script>
            
    </body>
</html>
